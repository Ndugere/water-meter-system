{% extends "core/base.html" %}
{% load static %}

{% block title %}Meters{% endblock %}

{% block content %}
<div class="container-fluid py-5" style="background-color:#f5f7fa; min-height:80vh;">
  <!-- Add this just below the container-fluid div and before the Page Header -->
<div class="mb-4 text-end">
    <a href="{% url 'meter_add' %}" class="btn btn-primary shadow-sm">
        <i class="bi bi-plus-circle me-2"></i> Add Meter
    </a>
</div>


  <!-- Page Header -->
  <div class="text-center mb-5">
    <h1 class="fw-bold display-5 text-dark">ðŸ’§ Meters</h1>
    <p class="text-muted">Click on a meter to view details, readings, and related customer info.</p>
  </div>

  <!-- Meters Grid -->
  <div class="row g-4">
    {% for meter in meters %}
    <div class="col-md-4">
      <div class="dashboard-btn btn-light border shadow-sm p-3 text-center position-relative">
        <a href="{% url 'meter_detail' meter.id %}" class="text-decoration-none d-block">
          <i class="bi bi-speedometer2 fs-1 mb-3" style="color:#0d6efd;"></i>
          <div class="fw-bold fs-5 text-dark">{{ meter.serial_number }}</div>
          <div class="small text-muted">Customer: {{ meter.customer.name }}</div>
          <div class="small text-muted">Installed: {{ meter.installation_date }}</div>
        </a>
        <div class="mt-3">
          <a href="{% url 'meter_edit' meter.id %}" class="btn btn-sm btn-outline-warning me-1">
            <i class="bi bi-pencil-square"></i> Edit
          </a>
          <a href="{% url 'meter_delete' meter.id %}" class="btn btn-sm btn-outline-danger">
            <i class="bi bi-trash"></i> Delete
          </a>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12 text-center">
      <p class="text-muted">No meters found in the system.</p>
    </div>
    {% endfor %}
  </div>

</div>

<style>
  .dashboard-btn {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 220px;
    border-radius: 1rem;
    text-decoration: none;
    transition: all 0.3s ease;
    background-color: white;
  }

  .dashboard-btn:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 16px 32px rgba(0,0,0,0.25);
    background-color: #0d6efd !important;
  }

  .dashboard-btn i {
    transition: color 0.3s ease;
  }

  .dashboard-btn:hover i {
    color: white !important;
  }

  .dashboard-btn .text-dark {
    transition: color 0.3s ease;
  }

  .dashboard-btn:hover .text-dark {
    color: white !important;
  }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
{% endblock %}
